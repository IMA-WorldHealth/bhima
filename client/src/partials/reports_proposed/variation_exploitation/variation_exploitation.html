<header data-header>
  {{'VARIATION_EXPLOITATION.BUILD_VARIATION_EXPLOITATION' | translate}}
</header>

<main>
  <div class="panel panel-default">
    <div class="panel-heading">
      {{'VARIATION_EXPLOITATION.DOCUMENT_CONFIG' | translate}}
    </div>
    <div class="panel-body">
      <form autocomplete="off" autocapitalize="off" autocorrect="off" novalidate>

        <div class="form-group">
          <label class="required">
            {{ "VARIATION_EXPLOITATION.FISCAL_YEAR" | translate }}
          </label>
          <div>
            <select class="form-bhima" ng-model="variationCtrl.fiscal_year_id" ng-options="fy.id as fy.fiscal_year_txt for fy in variationCtrl.fiscalYears.data" required>
              <option value="" disabled>{{"SELECT.FISCAL_YEAR" | translate}}</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>{{'VARIATION_EXPLOITATION.LANGUAGE' | translate}}</label>

          <div>
            <span ng-repeat="language in variationCtrl.configuration.language.options">
              <button
                class="btn btn-default btn-lg"
                ng-class="{'active' : variationCtrl.configuration.language.selected===language}"
                ng-click="variationCtrl.selectConfiguration('language', language)">
                {{language.label}}
              </button>
            </span>
          </div>
        </div>

        <button
          class="btn btn-default"
          ng-disabled="variationCtrl.building"
          ng-click="variationCtrl.generateDocument()" ng-if="!variationCtrl.generatedDocumentPath">{{variationCtrl.building ? variationCtrl.loading : variationCtrl.generate_doc}}
        </button>

        <a class="btn btn-success" href="{{variationCtrl.generatedDocumentPath}}" target="_blank" ng-if="variationCtrl.generatedDocumentPath" ng-click="variationCtrl.clearPath()">
          {{'VARIATION_EXPLOITATION.DOC_SUCCES' | translate}}
        </a>
      </form>
    </div>
  </div>
</main>

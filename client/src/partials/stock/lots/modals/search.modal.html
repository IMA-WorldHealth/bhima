<form
  name="ModalForm"
  ng-submit="$ctrl.submit(ModalForm)"
  data-modal="stock-lots-search"
  bh-form-defaults
  novalidate>

  <div class="modal-header">
    <ol class="headercrumb">
      <li class="static" translate>TREE.STOCK_LOTS</li>
      <li class="title" translate>FORM.LABELS.SEARCH</li>
    </ol>
  </div>

  <div class="modal-body">

    <!-- depot -->
    <div class="form-group">
      <label class="control-label" translate>STOCK.DEPOT</label>

      <ui-select name="depot" ng-model="$ctrl.bundle.depot_uuid">
        <ui-select-match>
          <span>{{$select.selected.text}}</span>
        </ui-select-match>
        <ui-select-choices ui-select-focus-patch repeat="depot as depot in $ctrl.depots | filter:{ 'text': $select.search }">
          <span ng-bind-html="depot.text | highlight:$select.search"></span>
        </ui-select-choices>
      </ui-select>
    </div>

    <!-- inventory -->
    <div class="form-group">
      <label class="control-label" translate>STOCK.INVENTORY</label>

      <ui-select name="inventory" ng-model="$ctrl.bundle.inventory_uuid">
        <ui-select-match>
          <span>{{$select.selected.label}}</span>
        </ui-select-match>
        <ui-select-choices ui-select-focus-patch repeat="inventory as inventory in $ctrl.inventories | filter:{ 'label': $select.search }">
          <span ng-bind-html="inventory.label | highlight:$select.search"></span>
        </ui-select-choices>
      </ui-select>
    </div>

    <!-- lot number  -->
    <div class="form-group">
      <label class="control-label" translate>STOCK.LOT</label>
      <input type="text" class="form-control" name="label" ng-model="$ctrl.bundle.label">
    </div>

    <!--entry date -->
    <fieldset>
      <legend translate>STOCK.ENTRY_DATE</legend>
      <bh-date-interval
        date-id="entry-date" date-from="$ctrl.bundle.entry_date_from" date-to="$ctrl.bundle.entry_date_to" mode="clean">
      </bh-date-interval>
    </fieldset>
    
    <!-- expiration date -->
    <fieldset>
      <legend translate>STOCK.EXPIRATION_DATE</legend>
      <bh-date-interval
        date-id="expiration-date" date-from="$ctrl.bundle.expiration_date_from" date-to="$ctrl.bundle.expiration_date_to" mode="clean">
      </bh-date-interval>
    </fieldset>

  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-default" ng-click="$ctrl.cancel()" data-method="cancel" translate> 
      FORM.BUTTONS.CLOSE
    </button>
    <bh-loading-button loading-state="ModalForm.$loading">
      <span translate>FORM.BUTTONS.SUBMIT</span>
    </bh-loading-button>
  </div>
</form>

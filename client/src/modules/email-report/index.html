<div class="flex-header static">
  <div class="bhima-title">
    <ol class="headercrumb">
      <li class="static" translate> TREE.ADMIN</li>
      <li class="static" translate> FORM.LABELS.EMALING_REPORT</li>
    </ol>


    <div class="toolbar">
      <div class="toolbar-item">
        <a class="btn btn-default pull-right"
          ui-sref="reportGroup"
          ui-sref-opts="{notify:false}">
            <i class="fa fa-plus"></i>
            <span translate>FORM.LABELS.REPORT_GROUP</span>
        </a>
      </div>
    </div>
  </div>

</div>



<div class="flex-content">
  <div class="container-fluid" id="anchor">

    <div class="col-md-12">
      <!-- start new Reporting group form -->
      <div class="col-md-5">
        <h4 translate>FORM.LABELS.NEW_PROFILE</h4>

        <form
          name="EmailReportRegistrationForm"
          bh-submit="EmailReportCtrl.save(EmailReportRegistrationForm)"
          bh-form-defaults
          novalidate>

            <!--select a profile -->
            <div class="form-group">
              <a  class="pull-right"
                data-method="selectProfile"
                ui-sref="emailreport.selectProfile"
                ui-sref-opts="{notify:false}" translate>
                  FORM.LABELS.SELECT_PROFILE
              </a>
            </div>


            <!-- name -->
            <div class="form-group"
              ng-class="{'has-error':EmailReportRegistrationForm.name.$invalid && EmailReportRegistrationForm.$submitted}">

              <label class="control-label" translate>
                FORM.LABELS.NAME
              </label>

              <div class="input-group col-md-12">
                <input class="form-control"
                  name="name"
                  ng-model="EmailReportCtrl.emailReport.name"
                  autocomplete="off"
                  required/>
                <div class="help-block"
                  ng-messages="EmailReportRegistrationForm.name.$error"
                  ng-show="EmailReportRegistrationForm.$submitted">
                    <div ng-messages-include="modules/templates/messages.tmpl.html">
                    </div>
                </div>
              </div>
            </div>
            <!-- email -->
            <div class="form-group"
              ng-class="{'has-error' : EmailReportRegistrationForm.email.$invalid && EmailReportRegistrationForm.$submitted}">

              <label class="control-label" translate>
                FORM.LABELS.EMAIL
              </label>

              <div class="input-group col-md-12">
                <input
                  class="form-control"
                  name="email"
                  ng-model="EmailReportCtrl.emailReport.email"
                  autocomplete="off"
                  type="email"
                  required/>
                <div class="help-block"
                  ng-messages="EmailReportRegistrationForm.email.$error"
                  ng-show="EmailReportRegistrationForm.$submitted">
                  <div ng-messages-include="modules/templates/messages.tmpl.html">
                  </div>
                </div>
              </div>
            </div>
            <!-- frequency -->

            <div
              class="form-group"
              ng-class="{'has-error' : EmailReportRegistrationForm.frequency.$invalid && EmailReportRegistrationForm.$submitted}">

              <label class="control-label" translate>
                FORM.LABELS.FREQUENCY
              </label>

              <div class="input-group col-md-12">

                <select
                  required=""
                  name="frequency"
                  ng-model="EmailReportCtrl.emailReport.frequency"
                  ng-options="item.key as (item.label | translate) for item in EmailReportCtrl.frequencies"
                  class="form-control">
                    <option>
                      Select a frequency
                    </option>

                </select>
                 <div class="help-block"
                  ng-messages="EmailReportRegistrationForm.frequency.$error"
                  ng-show="EmailReportRegistrationForm.$submitted">
                    <div ng-messages-include="modules/templates/messages.tmpl.html">
                    </div>
                </div>

              </div>
            </div>


            <!-- report Group -->

            <div
              class="form-group"
              ng-class="{'has-error' : EmailReportRegistrationForm.code_report_group.$invalid && EmailReportRegistrationForm.$submitted}">

              <label class="control-label" translate>
                FORM.LABELS.REPORT_GROUP
              </label>

              <div class="input-group col-md-12">
                <select
                name='code_report_group'
                  required=""
                  ng-model="EmailReportCtrl.emailReport.code_report_group"
                  class="form-control">
                    <option
                      ng-repeat="item in EmailReportCtrl.report_groups"
                      value="{{item.code}}">
                        {{item.name}}
                    </option>
                </select>
                <div class="help-block"
                  ng-messages="EmailReportRegistrationForm.code_report_group.$error"
                  ng-show="EmailReportRegistrationForm.$submitted">
                    <div ng-messages-include="modules/templates/messages.tmpl.html">
                    </div>
                </div>
              </div>
            </div>



            <div class="pull-right">
              <bh-loading-button
              ng-show="EmailReportCtrl.selectedEmailReport.selected==false"
              loading-state="BedRegistrationForm.$loading">
                {{ "FORM.BUTTONS.SAVE" | translate }}
              </bh-loading-button>

              <span class="btn btn-danger"
                ng-click="EmailReportCtrl.remove(EmailReportRegistrationForm)"
                ng-show="EmailReportCtrl.selectedEmailReport.selected"
                translate
                >
                FORM.BUTTONS.DELETE
              </span>

              <bh-loading-button
                ng-show="EmailReportCtrl.selectedEmailReport.selected"
                loading-state="BedRegistrationForm.$loading">
                  {{ "FORM.BUTTONS.UPDATE" | translate }}
              </bh-loading-button>
            </div>
        </form>

      </div>
      <!-- end new Reporting group form -->

      <!-- start grid of emails -->

      <div class="col-md-7">

        <!--the grid -->
        <div
          id="report-groups-grid"

          ui-grid="EmailReportCtrl.gridOptions"
          class="grid-full-height">
          <bh-grid-loading-indicator
            loading-state="EmailReportCtrl.loading"
            empty-state="EmailReportCtrl.gridOptions.data.length === 0"
            error-state="EmailReportCtrl.hasError">
          </bh-grid-loading-indicator>
        </div>

      </div>

      <!-- end grid of Reports group -->
    </div>

  </div>
</div>
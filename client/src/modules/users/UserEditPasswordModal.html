<form name="PasswordForm" bh-submit="UsersPasswordModalCtrl.submit(PasswordForm)" novalidate data-edit-password-modal>
  <div class="modal-header">
    <ol class="headercrumb">
      <li class="static" translate>USERS.TITLE</li>
      <li class="title" translate>USERS.SET_PASSWORD</li>
    </ol>
  </div>

  <div class="modal-body">
    <div class="form-group has-feedback" ng-class="{ 'has-error' : PasswordForm.$submitted && (PasswordForm.password.$invalid || !UsersPasswordModalCtrl.validPassword())}">
      <label class="control-label" translate>FORM.LABELS.PASSWORD</label>
      <input name="password"
        ng-model="UsersPasswordModalCtrl.user.password"
        class="form-control"
        type="password"
        bh-password-meter
        required>

        <bh-strength-meter password="PasswordForm.password.$viewValue"></bh-strength-meter>

        <div class="help-block" ng-messages="PasswordForm.password.$error"
          ng-show="PasswordForm.$submitted && PasswordForm.password.$error.password">
          <div ng-messages-include="modules/users/templates/password.policy.html"></div>
        </div>
    </div>

    <div class="form-group has-feedback" ng-class="{ 'has-error' : PasswordForm.$submitted && (PasswordForm.passwordVerify.$invalid || !UsersPasswordModalCtrl.validPassword()) }">
      <label class="control-label">
        <span translate>FORM.LABELS.PASSWORD</span> (<span translate>FORM.LABELS.RETYPE</span>)
      </label>

      <input name="passwordVerify" ng-model="UsersPasswordModalCtrl.user.passwordVerify" class="form-control" type="password" required>

      <p class="help-block" ng-if="PasswordForm.$submitted && !UsersPasswordModalCtrl.validPassword()" data-no-password-match translate>
        FORM.VALIDATION.PASSWORD_MATCH
      </p>

      <div class="help-block" ng-messages="PasswordForm.passwordVerify.$error && !PasswordForm.password.$error.password" ng-show="PasswordForm.$submitted">
        <div ng-messages-include="modules/templates/messages.tmpl.html"></div>
      </div>
    </div>
  </div>

  <div class="modal-footer">
    <button type="button"
      class="btn btn-default"
      ng-click="UsersPasswordModalCtrl.cancel()"
      data-method="cancel" translate>
      FORM.BUTTONS.CANCEL
    </button>

    <bh-loading-button loading-state="PasswordForm.$loading">
      <span translate>FORM.BUTTONS.SUBMIT</span>
    </bh-loading-button>
  </div>
</form>

<fieldset
    ng-form="{{$ctrl.formName}}"
    novalidate
    data-bh-fiscal-period-select>

    <div class="form-group" 
        ng-class="{ 'has-error' : $ctrl.validationTrigger && $ctrl.formName.fiscals.$invalid }">
        <div>
            <label class="control-label" translate>FORM.LABELS.FISCAL_YEAR</label>
            <ui-select multiple  name="fiscals" ng-model="$ctrl.selectedFiscals" theme="bootstrap" close-on-select="false" ng-change="$ctrl.loadPeriod($ctrl.selectedFiscals)" required>
                <ui-select-match placeholder="{{ 'FORM.SELECT.FISCAL_YEAR' | translate }}">
                    <span>{{$item.label}}</span>
                </ui-select-match>

                <ui-select-choices repeat="fiscal.id as fiscal in $ctrl.fiscals| filter:{label: $select.search}">
                    <span ng-bind-html="fiscal.label | highlight: $select.search"></span>
                </ui-select-choices>
            </ui-select>

            <div class="help-block" ng-messages="$ctrl.formName.fiscals.$error" ng-show="$ctrl.validationTrigger">
                <div ng-messages-include="modules/templates/messages.tmpl.html"></div>
            </div>
        </div>
    </div>

    <div class="form-group" 
        ng-class="{ 'has-error' : $ctrl.validationTrigger && $ctrl.formName.periods.$invalid }">
        <div>
            <label class="control-label" translate>FORM.LABELS.PERIOD</label>
            <ui-select multiple  name="periods" ng-model="$ctrl.selectedPeriods" theme="bootstrap" close-on-select="false" required>
                <ui-select-match placeholder="{{ 'FORM.SELECT.PERIOD' | translate }}">
                    <span>{{$item.label}}</span>
                </ui-select-match>

                <ui-select-choices repeat="period.id as period in $ctrl.periods| filter:{label: $select.search}">
                    <span ng-bind-html="period.label | highlight: $select.search"></span>
                </ui-select-choices>
            </ui-select>

            <div class="help-block" ng-messages="$ctrl.formName.periods.$error" ng-show="$ctrl.validationTrigger">
                <div ng-messages-include="modules/templates/messages.tmpl.html"></div>
            </div>
        </div>
    </div>
</fieldset>




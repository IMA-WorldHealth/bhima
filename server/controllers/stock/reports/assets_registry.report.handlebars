{{> head }}

<body>

  {{> header }}

  <!-- filters  -->
  {{> filterbar filters=filters }}

  <!-- list of data  -->
  <table class="table table-condensed table-bordered table-report">
    <thead>
      <tr>
        <th>{{translate 'STOCK.CODE'}}</th>
        <th>{{translate 'STOCK.INVENTORY'}}</th>
        <th>{{translate 'TABLE.COLUMNS.INVENTORY_GROUP'}}</th>
        <th>{{translate 'ASSET.ASSET_LABEL'}}</th>
        <th>{{translate 'STOCK.QUANTITY'}}</th>
        <th>{{translate 'STOCK.UNIT_COST'}}</th>
        <th>{{translate 'STOCK.ENTRY_DATE'}}</th>
        <th>{{translate 'TABLE.COLUMNS.REFERENCE'}}</th>
        <th>{{translate 'FORM.LABELS.REFERENCE_NUMBER'}}</th>
        <th>{{translate 'FORM.LABELS.MANUFACTURER_BRAND'}}</th>
        <th>{{translate 'FORM.LABELS.MANUFACTURER_MODEL'}}</th>
        <th>{{translate 'FORM.LABELS.SERIAL_NUMBER'}}</th>
        <th>{{translate 'TABLE.COLUMNS.STATUS'}}</th>
        <th title={{translate 'LOTS.ASSIGNMENT_CREATED'}}>{{translate 'ENTITY.ASSIGNED_TO'}}</th>
      </tr>
    </thead>
    <tbody>
      <!-- for each depots which contains lots -->
      {{#each depots as | items name |}}

        <!-- this is the depot group header -->
        <tr style="border:none">
          <th style="border:none; border-bottom: solid black 2px;" class="text-uppercase" colspan="10">
            {{ name }}
          </th>

          <th colspan="5" style="border:none; border-bottom: solid black 2px;" class="text-right">
            ({{ items.length }} {{ translate "TABLE.AGGREGATES.RECORDS" }})
          </th>
        </tr>

        <!-- these are the items for each group -->
        {{#each items as | item | }}
          <tr>
            <td>{{code}}</td>
            <td>{{text}}</td>
            <td>{{group_name}}</td>
            <td>{{label}}</td>
            <td class="text-right">{{quantity}}</td>
            <td class="text-right">{{unit_cost}}</td>
            <td class="text-right">{{date entry_date}}</td>
            <td class="text-right">{{documentReference}}</td>
            <td class="text-right">{{reference_number}}</td>
            <td class="text-right">{{manufacturer_brand}}</td>
            <td class="text-right">{{manufacturer_model}}</td>
            <td class="text-right">{{serial_number}}</td>
            <td class="text-right">{{status}}</td>
            <td class="text-right">{{assigned_to_name}}</td>
          </tr>
        {{else}}
            {{> emptyTable columns=15}}
        {{/each}}

        <!-- blank row  -->
        {{#unless @last }}
          <!-- blank line -->
          <tr style="border:none;">
            <th style="border:none;"></th>
          </tr>
        {{/unless}}
      {{/each}}
    </tbody>
  </table>
